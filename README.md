# Humanâ€‘AI Code Classifier

Detects whether a code snippet is written by a human or generated by a Large Language Model (LLM).

## âš™ï¸ Environment
Python 3.10  
Ubuntu 24.04.2 LTS  
All required dependencies are listed in classifier_env.yaml

## Project Structure
```text
.
â”œâ”€â”€ README.md
â”œâ”€â”€ classifier_env.yaml
â”œâ”€â”€ dataset
â”‚   â”œâ”€â”€ README.md
â”‚   â”œâ”€â”€ csv
â”‚   â”‚   â”œâ”€â”€ cpp_dataset.csv
â”‚   â”‚   â”œâ”€â”€ python_dataset.csv
â”‚   â”‚   â””â”€â”€ sample250_problem_list.csv
â”‚   â”œâ”€â”€ data_extraction.ipynb
â”‚   â”œâ”€â”€ description_move.ipynb
â”‚   â”œâ”€â”€ problem_selection.ipynb
â”‚   â””â”€â”€ utils
â”‚       â”œâ”€â”€ ai_code_generator.py
â”‚       â”œâ”€â”€ ai_dataset_csv.py
â”‚       â”œâ”€â”€ code_feature_generator.py
â”‚       â”œâ”€â”€ merge_csv.py
â”‚       â””â”€â”€ python_feature_extractor.py
â”œâ”€â”€ models
â”‚   â”œâ”€â”€ python_xgb_top2.joblib // XGBoost Python Multilabel classifier
â”‚   â”œâ”€â”€ svm_python_bin.joblib // SVM Python Binary classifier
â”‚   â”œâ”€â”€ cpp_xgb_top2.joblib // XGBoost CPP Multilabel classifier
â”‚   â””â”€â”€ svm_binary_cpp.joblib // SVM CPP Binary classifier
â”œâ”€â”€ service
â”‚   â”œâ”€â”€ cpp_utils.py
â”‚   â”œâ”€â”€ main.py
â”‚   â”œâ”€â”€ python_utils.py
â”‚   â””â”€â”€ static
â”‚       â”œâ”€â”€ favicon.ico
â”‚       â”œâ”€â”€ favicon.png
â”‚       â””â”€â”€ index.html
â””â”€â”€ train
    â”œâ”€â”€ XGBoost_top2.ipynb
    â”œâ”€â”€ ensemble_cpp.ipynb
    â”œâ”€â”€ ensemble_python.ipynb
    â””â”€â”€ random_forest.ipynb
```

## ğŸ“Š Dataset
Dataset directory: dataset/csv/final  
Total samples:  
2,500 human-written code samples  
2,500 LLM-generated code samples from (500 samples each): 
- GPT-4.1-mini
- GROK3
- Mistral-code
- DeepSeek V3
- Gemini 2.5 Flash

## ğŸ§  Training

Training code and Jupyter notebooks are available in the train/ directory.
Models include:  
- SVM
- XGBoost
- Random Forest
- Ensemble (major voting)

## ğŸ› ï¸ Setup

### 1. Install Miniconda (skip if already installed)

```
curl -L -O "https://github.com/conda-forge/miniforge/releases/latest/download/Miniforge3-$(uname)-$(uname -m).sh"
bash Miniforge3-$(uname)-$(uname -m).sh
```

### 2. Clone the repository

```
git clone https://github.com/SSU2025-PS-MLProject/human-ai-code-classifier.git
cd Human-AI-Code-Classifier
```

### 3. Set up the Conda environment

```
conda env create -f classifier_env.yaml
conda activate classifier
```

### 4. Set up environment variables (for C++ feature extraction)

After setting up the environment, locate the libclang.so file and export it:

#### Find the path
```
conda env list          # find your env path
find [ENV_PATH] -name "libclang.so*" 2>/dev/null
```

#### Export the path
```
export CLANG_LIBRARY_FILE=/your/path/to/libclang.so
```

### 5. Download pretrained models
LINK : https://drive.google.com/drive/folders/1R4OHNtSXkwGv0OZfbJ79RSYsXGIIJ0Sn?usp=sharing  
Download pretrained models from Google Drive and place them in the following directory structure:
```
project-root/
â””â”€ models/
   â”œâ”€ ensemble_cpp_binary.joblib
   â”œâ”€ ensemble_cpp_multi.joblib
   â”œâ”€ ensemble_python_binary.joblib
   â””â”€ ensemble_python_multi.joblib
```
Note: The API loads models from ../models/. Adjust the path if needed.

â¸»

## ğŸš€ Running the Web/API Server

```
cd service
uvicorn main:app --host 0.0.0.0 --port [AnyPort] --reload
```
`--reload` argument is optional

You can add `--workers [numberOfProcess]` argument if you want to process multiple requests

## Web page
You can access web page at: http://[YourPublicIpAddr]:[Port]

## ğŸ” Swagger Documentation

Access the API docs at: http://[YourPublicIpAddr]:[Port]/docs

## ğŸ“ Notes
This server is intended for local or single-user testing.  
For multi-user support or deployment, consider containerizing the service or modifying main.py accordingly.  
